---
keywords: 
  - ESXi网络概述
  - 家庭ESXi网络概述
  - 家庭AIO搭建教程
  - 家庭All-in-One搭建教程
description: 在成功安装ESXi系统后，还需要进行一系列基础配置，以便通过Web界面管理虚拟化环境。
---
在ESXi网络中我们常操作一般是：物理网卡、虚拟交换机、端口组，本篇重点以这三个为例讲解，理解这三者的关系和作用是管理 ESXi 网络的基础。

以下是 ESXi Web 管理是物理网卡、虚拟交换机、端口组的页面。
=== "物理网卡"

	![物理网卡](https://img.it927.com/aio/67.png)

=== "虚拟交换机"

	![虚拟交换机](https://img.it927.com/aio/68.png)

=== "端口组"

	![端口组](https://img.it927.com/aio/70.png)


## 物理网卡
物理网卡（Physical Network Adapter，也称为 vmnic）是 ESXi 主机上的实际网络硬件接口（必须是 ESXi 兼容的网卡），负责与外部网络的物理连接，可绑定到虚拟交换机上。
![物理网卡](https://img.it927.com/aio/69.png)
陈大剩这里使用的是 INTEL I350T4V2 四口千兆网卡，所以显示了四个网卡，其中管理端口会占用一个网卡，我们对某个物理网卡编辑，也只能修改其协商速度。
### 主要特点
- **硬件基础**：ESXi 网络架构的物理基础；
- **上行链路**：为 **虚拟交换机** 提供与外部网络的连接；
- **冗余支持**：可配置多个物理网卡实现网络冗余；
- **带宽限制**：物理网卡的带宽决定了整个网络的最大吞吐量；

### 物理网卡总结
物理网卡主要是为 **虚拟交换机** 提供与外部网络的连接，我们无法改变其配置，只能修改其协商速度。我们可以将物理网卡比喻路由器中的 WAN 口，WAN 口是路由器的总出口。

## 虚拟交换机
虚拟交换机（Virtual Switch，简称 vSwitch）是 ESXi 中的 **软件交换机**，虚拟交换机也是 ESXi 的网络中核心概念。虚拟交换机负责在虚拟机、VMkernel接口和物理网络之间转发网络流量，能进行 **网络隔离**，它上行可以绑定 **0-1** 个物理网卡，下行可以分配给 **0-N** 个端口组。
![虚拟交换机](https://img.it927.com/aio/71.png)
vSwitch0 是 ESXi 安装后自动创建的第一个虚拟交换机，用于承载 **管理网络** 和 **基础的虚拟机网络** 流量。
### 主要特点
- **流量转发**：在连接的端口之间转发数据包；
- **VLAN支持**：**实现网络隔离和分段**；
- **负载均衡**：在多个上行链路间分配流量；
- **故障转移**：自动切换到可用的上行链路；

### 添加标准虚拟交换机
![添加虚标准虚拟交换机](https://img.it927.com/aio/72.png)
#### 链路发现
链路发现协议帮助识别和管理网络连接：

- **CDP（Cisco Discovery Protocol）**：
    - 监听模式：接收来自 Cisco 设备的信息；
    - 播发模式：向网络通告 ESXi 主机信息；
    - 双向模式：既监听又通告；
    - 无：不使用链路发现协议；

#### 安全
虚拟交换机的安全策略控制网络流量的安全性：

- **混杂模式（Promiscuous Mode）**：
    - 拒绝：默认设置，虚拟机只能接收发给自己的流量；
    - 接受：虚拟机可以接收所有经过虚拟交换机的流量；
- **MAC 地址更改**：
    - 拒绝：阻止虚拟机更改其 MAC 地址；
    - 接受：允许虚拟机修改 MAC 地址；
- **伪传输（Forged Transmits）**：
    - 拒绝：阻止虚拟机发送伪造源 MAC 地址的数据包；
    - 接受：允许虚拟机发送任意源 MAC 地址的数据包；

### 虚拟交换机总结

???+ warning "注意"

    有网友会问不是说虚拟交换机能实现网络隔离和分段吗？为什么没有设置呢？

    其实虚拟交换机中网络隔离和分段，主要是依靠上游链路和端口组来实现的，上游链路中有物理网卡接的网线，如有 DHCP 协议主机，则会和上游链路一个网段；当然端口有 DHCP 协议主机，则会和端口一个网段。在一个虚拟交换机中请勿出现两个 DHCP 协议主机，否则会导致冲突，无法开机。


## 端口组
端口组（Port Group）是虚拟交换机上的逻辑分组，定义了连接到该组的虚拟机或 VMkernel 接口的网络策略和配置。
![端口组](https://img.it927.com/aio/73.png)
## 总结
可以用一张图总结。
